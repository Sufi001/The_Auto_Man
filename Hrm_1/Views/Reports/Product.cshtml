@{
    ViewBag.Title = "Product";
}
<link href="~/AdminLte/plugins/datatables-buttons/css/buttons.bootstrap4.min.css" rel="stylesheet" />
<div class="container-fluid">
    <div class="content-wrapper">
        <section class="content">
            @*<div class="row">
                <div class="col-3" style="margin-top:10px">
                    @Html.DropDownList("Department", new SelectList(ViewBag.Departmentlist, "DEPT_CODE", "DEPT_NAME"), "Select Department",
                        new { @style = "margin-top:2px", @id = "ddl_Department", name = "ddl_Department", @onchange = "FillGroup()", @class = "form-control" })
                </div>
                <div class="col-3" style="margin-top:10px">
                    @Html.DropDownList("Group", new SelectList("", "GROUP_CODE", "GROUP_NAME"), "Select Department",
                        new { @style = "margin-top:2px", @id = "ddl_Group", name = "ddl_Group", @onchange = "FillSubGroup()", @class = "form-control" })
                </div>
                <div class="col-3" style="margin-top:10px">
                    @Html.DropDownList("SubGroup", new SelectList("", "SGROUP_CODE", "SGROUP_NAME"), "Select Department",
                        new { @style = "margin-top:2px", @id = "ddl_SubGroup", name = "ddl_SubGroup", @class = "form-control" })
                </div>
                <div class="col-3" style="margin-top:10px">
                    <button id="Report" class="btn btn-primary form-control pull-right" onclick="GetData()">Report</button>
                </div>
            </div>
            <hr style="color:black;" />*@

            <div class="row">
                <div class="card" style="width:100%">
                    <div class="card-header" style="background-color:rgba(0, 0, 0, 0.075)">
                        <div class="row">
                            <div class="col-md-2 col-sm-6" style="margin-top:10px">
                                <select class="form-control" id="show" onchange="show()" style="margin-top:2px">
                                    <option value="S">Supplier</option>
                                    <option value="D">Department</option>
                                    <option value="">Brand</option>
                                </select>
                            </div>

                            <div class="col-md-2 col-sm-6" style="margin-top:10px">
                                @Html.DropDownList("Department", new SelectList(ViewBag.Departmentlist, "DEPT_CODE", "DEPT_NAME"), "Select Department",
                        new { @style = "margin-top:2px", @id = "ddl_Department", name = "ddl_Department", @onchange = "FillGroup()", @class = "form-control" })

                                    @Html.DropDownList("Supplier", new SelectList(ViewBag.Supplierlist, "Code", "Name"), "Select Supplier",
                        new { @style = "margin-top:2px", @id = "ddl_Supplier", name = "ddl_Supplier", @class = "form-control" })
                            </div>
                            <div class="col-md-2 col-sm-6" style="margin-top:10px">
                                @Html.DropDownList("Group", new SelectList("", "GROUP_CODE", "GROUP_NAME"), "Select Department",
                        new { @style = "margin-top:2px", @id = "ddl_Group", name = "ddl_Group", @onchange = "FillSubGroup()", @class = "form-control" })
                            </div>
                            <div class="col-md-2 col-sm-6" style="margin-top:10px">
                                @Html.DropDownList("SubGroup", new SelectList("", "SGROUP_CODE", "SGROUP_NAME"), "Select Department",
                        new { @style = "margin-top:2px", @id = "ddl_SubGroup", name = "ddl_SubGroup", @class = "form-control" })
                            </div>
                            <div class="col-md-2 col-sm-6" style="margin-top:10px">
                                @Html.DropDownList("Department", new SelectList(ViewBag.Brands, "Id", "Name"), "Brand",
                        new { @style = "margin-top:2px", @id = "ddl_Brand", name = "ddl_Brand",  @class = "form-control" })
                            </div>
                            <div class="col-md-2 col-sm-6" style="margin-top:10px">
                                <button id="Report" class="btn btn-primary form-control pull-right" onclick="GetData()">Report</button>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">

                        <iframe name="DetailFrame" id="DetailFrame" src="" style="width:100%;height:800px;background-color:white" frameborder="0"></iframe>


                    </div>
                    @*<div class="card-footer">Footer</div>*@
                </div>
                @*<div class="panel panel-default">
                    <div class="panel-body">
                        <div class="tab-content" id="tab_Id">
                            <iframe name="DetailFrame" id="DetailFrame" src="" style="width:960px;height:430px;zoom:1;background-color:white" SizeToReportContent="true" frameborder="0" scrolling="no"></iframe>
                            <div id="table_SummaryReport" class="tab-pane fade in">
                                <iframe name="SummaryFrame" id="SummaryFrame" src="about:blank" style="width:960px;height:430px;zoom:1" frameborder="0" scrolling="no"></iframe>
                            </div>
                        </div>
                    </div>
                </div>*@
            </div>
            @*<div class="row table-responsive">
                <table id="example" class="table table-striped table-bordered dt-responsive" style="width:100%" cellspacing="0">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Position</th>
                            <th>Office</th>
                            <th>Age</th>
                            <th>Start date</th>
                            <th>Salary</th>
                        </tr>
                    </thead>
                    <tbody id="DataTableBody">
                        <tr>
                            <td>Tiger Nixon</td>
                            <td>System Architect</td>
                            <td>Edinburgh</td>
                            <td>61</td>
                            <td>2011/04/25</td>
                            <td>$320,800</td>
                        </tr>
                        <tr>
                            <td>Garrett Winters</td>
                            <td>Accountant</td>
                            <td>Tokyo</td>
                            <td>63</td>
                            <td>2011/07/25</td>
                            <td>$170,750</td>
                        </tr>
                        <tr>
                            <td>Ashton Cox</td>
                            <td>Junior Technical Author</td>
                            <td>San Francisco</td>
                            <td>66</td>
                            <td>2009/01/12</td>
                            <td>$86,000</td>
                        </tr>
                        <tr>
                            <td>Cedric Kelly</td>
                            <td>Senior Javascript Developer</td>
                            <td>Edinburgh</td>
                            <td>22</td>
                            <td>2012/03/29</td>
                            <td>$433,060</td>
                        </tr>
                        <tr>
                            <td>Airi Satou</td>
                            <td>Accountant</td>
                            <td>Tokyo</td>
                            <td>33</td>
                            <td>2008/11/28</td>
                            <td>$162,700</td>
                        </tr>
                        <tr>
                            <td>Brielle Williamson</td>
                            <td>Integration Specialist</td>
                            <td>New York</td>
                            <td>61</td>
                            <td>2012/12/02</td>
                            <td>$372,000</td>
                        </tr>
                        <tr>
                            <td>Herrod Chandler</td>
                            <td>Sales Assistant</td>
                            <td>San Francisco</td>
                            <td>59</td>
                            <td>2012/08/06</td>
                            <td>$137,500</td>
                        </tr>
                        <tr>
                            <td>Rhona Davidson</td>
                            <td>Integration Specialist</td>
                            <td>Tokyo</td>
                            <td>55</td>
                            <td>2010/10/14</td>
                            <td>$327,900</td>
                        </tr>
                        <tr>
                            <td>Dai Rios</td>
                            <td>Personnel Lead</td>
                            <td>Edinburgh</td>
                            <td>35</td>
                            <td>2012/09/26</td>
                            <td>$217,500</td>
                        </tr>
                        <tr>
                            <td>Jenette Caldwell</td>
                            <td>Development Lead</td>
                            <td>New York</td>
                            <td>30</td>
                            <td>2011/09/03</td>
                            <td>$345,000</td>
                        </tr>
                        <tr>
                            <td>Yuri Berry</td>
                            <td>Chief Marketing Officer (CMO)</td>
                            <td>New York</td>
                            <td>40</td>
                            <td>2009/06/25</td>
                            <td>$675,000</td>
                        </tr>
                        <tr>
                            <td>Caesar Vance</td>
                            <td>Pre-Sales Support</td>
                            <td>New York</td>
                            <td>21</td>
                            <td>2011/12/12</td>
                            <td>$106,450</td>
                        </tr>
                        <tr>
                            <td>Doris Wilder</td>
                            <td>Sales Assistant</td>
                            <td>Sidney</td>
                            <td>23</td>
                            <td>2010/09/20</td>
                            <td>$85,600</td>
                        </tr>
                        <tr>
                            <td>Angelica Ramos</td>
                            <td>Chief Executive Officer (CEO)</td>
                            <td>London</td>
                            <td>47</td>
                            <td>2009/10/09</td>
                            <td>$1,200,000</td>
                        </tr>
                        <tr>
                            <td>Gavin Joyce</td>
                            <td>Developer</td>
                            <td>Edinburgh</td>
                            <td>42</td>
                            <td>2010/12/22</td>
                            <td>$92,575</td>
                        </tr>
                        <tr>
                            <td>Jennifer Chang</td>
                            <td>Regional Director</td>
                            <td>Singapore</td>
                            <td>28</td>
                            <td>2010/11/14</td>
                            <td>$357,650</td>
                        </tr>
                        <tr>
                            <td>Brenden Wagner</td>
                            <td>Software Engineer</td>
                            <td>San Francisco</td>
                            <td>28</td>
                            <td>2011/06/07</td>
                            <td>$206,850</td>
                        </tr>
                        <tr>
                            <td>Fiona Green</td>
                            <td>Chief Operating Officer (COO)</td>
                            <td>San Francisco</td>
                            <td>48</td>
                            <td>2010/03/11</td>
                            <td>$850,000</td>
                        </tr>
                        <tr>
                            <td>Shou Itou</td>
                            <td>Regional Marketing</td>
                            <td>Tokyo</td>
                            <td>20</td>
                            <td>2011/08/14</td>
                            <td>$163,000</td>
                        </tr>
                        <tr>
                            <td>Michelle House</td>
                            <td>Integration Specialist</td>
                            <td>Sidney</td>
                            <td>37</td>
                            <td>2011/06/02</td>
                            <td>$95,400</td>
                        </tr>
                        <tr>
                            <td>Suki Burks</td>
                            <td>Developer</td>
                            <td>London</td>
                            <td>53</td>
                            <td>2009/10/22</td>
                            <td>$114,500</td>
                        </tr>
                        <tr>
                            <td>Prescott Bartlett</td>
                            <td>Technical Author</td>
                            <td>London</td>
                            <td>27</td>
                            <td>2011/05/07</td>
                            <td>$145,000</td>
                        </tr>
                        <tr>
                            <td>Gavin Cortez</td>
                            <td>Team Leader</td>
                            <td>San Francisco</td>
                            <td>22</td>
                            <td>2008/10/26</td>
                            <td>$235,500</td>
                        </tr>
                        <tr>
                            <td>Martena Mccray</td>
                            <td>Post-Sales support</td>
                            <td>Edinburgh</td>
                            <td>46</td>
                            <td>2011/03/09</td>
                            <td>$324,050</td>
                        </tr>
                        <tr>
                            <td>Unity Butler</td>
                            <td>Marketing Designer</td>
                            <td>San Francisco</td>
                            <td>47</td>
                            <td>2009/12/09</td>
                            <td>$85,675</td>
                        </tr>
                        <tr>
                            <td>Tatyana Fitzpatrick</td>
                            <td>Regional Director</td>
                            <td>London</td>
                            <td>19</td>
                            <td>2010/03/17</td>
                            <td>$385,750</td>
                        </tr>
                        <tr>
                            <td>Michael Silva</td>
                            <td>Marketing Designer</td>
                            <td>London</td>
                            <td>66</td>
                            <td>2012/11/27</td>
                            <td>$198,500</td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <th>Name</th>
                            <th>Position</th>
                            <th>Office</th>
                            <th>Age</th>
                            <th>Start date</th>
                            <th>Salary</th>
                        </tr>
                    </tfoot>
                </table>
            </div>*@
        </section>
    </div>
</div>


@section scripts{
    @*<script src="~/AdminLte/plugins/datatables/jquery.dataTables.js"></script>
        <script src="~/AdminLte/plugins/datatables-bs4/js/dataTables.bootstrap4.js"></script>
        <script src="~/AdminLte/plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>
        <script src="~/AdminLte/plugins/datatables-buttons/js/buttons.html5.min.js"></script>
        <script src="~/AdminLte/plugins/pdfmake/pdfmake.min.js"></script>
        <script src="~/AdminLte/plugins/pdfmake/vfs_fonts.js"></script>
        <script src="~/AdminLte/plugins/datatables-rowgroup/js/dataTables.rowGroup.min.js"></script>*@
    <script type="text/javascript">

        $("#SetExtraText").text("(Products Report)");




        $(document).ready(function () {
            $('#ddl_Group').empty();
            $('#ddl_SubGroup').empty();
            $('#ddl_Group').append(new Option('Group', ''));
            $('#ddl_SubGroup').append(new Option('Sub Group', ''));

            //$('#example').DataTable({
            //    searching: false,// paging: false, info: false,
            //    dom: 'Bfrtip',


            //    buttons: [
            //        //'copyHtml5',
            //        //'excelHtml5',
            //        //'csvHtml5',
            //        'pdfHtml5'
            //    ],

            ////order: [[3, 'asc']],

            ////    rowGroup: {
            ////dataSrc: 1
            ////}
            //});



        });
        function resizeIframe(obj) {
            obj.style.height = obj.contentWindow.document.body.scrollHeight + 'px';
        }
        function FillGroup() {
            $('#ddl_Group').empty();
            $('#ddl_SubGroup').empty();
            $('#ddl_SubGroup').append(new Option('Group', ''));
            var DepartmentCode = $('#ddl_Department').val();
            $.ajax({
                url: "/Reports/FillGroup/" + DepartmentCode,
                type: "GET",
                dataType: "JSON",
                success: function (_data) {
                    var obj = JSON.parse(_data);
                    $('#ddl_Group').append(new Option('Group', ''));
                    $.each(obj, function (index, element) {
                        $('#ddl_Group').append(new Option(obj[index].GROUP_NAME, obj[index].GROUP_CODE));
                    });
                },
                error: function (xhr) {
                    alert('Request Status: \n ' + xhr.status + ' Status Text: ' + xhr.statusText + ' ' + xhr.responseText);
                }
            }
          );
        }
        function FillSubGroup() {
            $('#ddl_SubGroup').empty();
            var _id = '';
            var Dept_Id = $('#ddl_Department').val();
            var Group_Id = $('#ddl_Group').val();
            _id = Dept_Id + Group_Id;
            $.ajax({
                url: "/Reports/FillSubGroup/" + _id,
                type: "GET",
                dataType: "JSON",
                success: function (_data) {
                    var obj = JSON.parse(_data);
                    $('#ddl_SubGroup').append(new Option('Sub Group', ''));
                    $.each(obj, function (index, element) {
                        $('#ddl_SubGroup').append(new Option(obj[index].SGROUP_NAME, obj[index].SGROUP_CODE));
                    });
                },
                error: function (xhr) {
                    alert('Request Status: \n ' + xhr.status + ' Status Text: ' + xhr.statusText + ' ' + xhr.responseText);
                }
            }
            );
        }
        show();
        function show(e) {
            var s = $("#show").val();
            if (s == "S") {
                $("#ddl_Department").hide();
                $("#ddl_Group").hide();
                $("#ddl_SubGroup").hide();
                $("#ddl_Supplier").show();
                $("#ddl_Brand").hide();

            }
            else if (s == "D") {
                $("#ddl_Department").show();
                $("#ddl_Group").show();
                $("#ddl_SubGroup").show();
                $("#ddl_Supplier").hide();
                $("#ddl_Brand").hide();

            }
            else {
                $("#ddl_Department").hide();
                $("#ddl_Group").hide();
                $("#ddl_SubGroup").hide();
                $("#ddl_Supplier").hide();
                $("#ddl_Brand").show();

            }

            
        }

        function GetData() {
            debugger;
            var DeptId = $("#ddl_Department").val();
            var GroupId = $("#ddl_Group").val();
            var SubGroupId = $("#ddl_SubGroup").val();
            var Brand = $("#ddl_Brand").val();
            var s = $("#show").val();
            var supp = $("#ddl_Supplier").val();

            var Url ="";

            if (s == "S") {
                $("#Report").attr("disabled", "disabled");
                Url = "/Reports/ProductBySupplier?Supplier=" + supp;

            }
            else {
                $("#Report").attr("disabled", "disabled");
                Url = "/Reports/ProductList?Dept_Code=" + DeptId + "&Group_Code=" + GroupId + "&SubGroup_Code=" + SubGroupId + "&Brand=" + Brand;

            }
            
            $('#DetailFrame').attr('src', "");
            $('#DetailFrame').attr('src', Url);
            $("#Report").removeAttr("disabled");
        }

          
    </script>
}
